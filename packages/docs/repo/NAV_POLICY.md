# Repo Navigation Policy（地図・索引のSSOT運用）

## 1. 目的とSSOTの考え方

- 本ドキュメント群は **システム仕様のSSOTではない**。
- ただし、AI/人間が迷子にならないために、
  - **SSOTの所在**（どこが真実か）
  - **境界**（触って良い/悪い）
  - **読む順番**（入口/エントリポイント）
  を一貫して指す。

## 2. どこに何を書くか（配置規約）

### 2.1 入口（全体）

- repo ルート `README.md` は **入口に徹する**
  - 目的、最初に読むリンク集（AGENTS.md / MAP / INDEX）
  - 詳細は `packages/docs/repo/` に寄せる

### 2.2 地図と索引（このフォルダ）

- `packages/docs/repo/MAP.md`
  - 全体の箱と矢印（主な流れ）
  - フォルダ分類と役割
  - 「どこから読むか」導線

- `packages/docs/repo/INDEX.md`
  - **検索で引ける辞書**（用語・逆引き）
  - 見出し語は固定語彙で揃える（grepで引ける形）

### 2.3 主要フォルダのREADME（局所）

- 主要ディレクトリに `README.md` を置く場合は **薄く**する
  - 役割
  - 入口（最初に読むファイル）
  - 依存の向き（上位/下位）
  - 生成物/ミラーの注意

## 3. 生成物・ミラーに関する規範

- `apps/site/public/**` や `dist/public/vendor` のような配布物は原則編集禁止
- 変更は必ず **生成元（SSOT側）** に入れる
- ミラー候補がある場合（例: `apps/site/src/content/**`）は、編集前に元を特定する

## 4. 配線（依存/データフロー）の表現方法

### 4.1 手動の配線図（推奨）

- `MAP.md` に Mermaid の図を置き、
  - 「主線」だけを描く（細部まで自動化しない）
  - 図の下に説明（前提・境界・禁止事項）を添える

### 4.2 半自動の索引生成（任意）

- 自動化する場合は「索引（リンク集）」程度に留める
- 生成物は `_generated/` に隔離し、AGENTS/運用ルールに従って扱う

## 5. 更新ルール

- 変更が repo 構造に関わる時は
  1) `MAP.md` の該当箇所
  2) 必要なら `INDEX.md` の見出し語
  を最低限更新する

- AGENTS.md 自体は「人間が編集」だが、
  - 追記が必要な場合は `AGENTS.proposed.md` に提案として出す

