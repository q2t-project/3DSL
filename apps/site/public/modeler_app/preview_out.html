<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>3DSD Preview</title>
    <script type="importmap">
      {
        "imports": {
          "ajv": "/vendor/ajv/dist/ajv.bundle.js",
          "three": "/vendor/three/build/three.module.js",
          "three/addons/": "/vendor/three/examples/jsm/"
        }
      }
    </script>


    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        background: #0b0f14;
        overflow: hidden;
        font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", sans-serif;
      }

      .wrap {
        position: fixed;
        inset: 0;
      }

      #previewout-video,
      #previewout-canvas {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        background: #0b0f14;
        object-fit: contain;
      }

      .overlay {
        position: absolute;
        left: 12px;
        top: 12px;
        max-width: calc(100% - 24px);
        color: #e8eef6;
        background: rgba(0, 0, 0, 0.35);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        padding: 8px 10px;
        backdrop-filter: blur(6px);
        line-height: 1.35;
      }

      .title {
        font-size: 12px;
        opacity: 0.85;
      }

      .mode {
        font-size: 11px;
        opacity: 0.75;
        margin-top: 2px;
      }

      .label {
        font-size: 14px;
        font-weight: 600;
        margin-top: 2px;
        word-break: break-word;
      }

      .controls {
        margin-top: 6px;
        display: flex;
        gap: 6px;
        flex-wrap: wrap;
      }

      .btn {
        appearance: none;
        border: 1px solid rgba(255, 255, 255, 0.14);
        background: rgba(255, 255, 255, 0.06);
        color: #e8eef6;
        border-radius: 10px;
        padding: 4px 8px;
        font-size: 12px;
        line-height: 1.2;
        cursor: pointer;
      }

      .btn.is-on {
        background: rgba(80, 180, 255, 0.22);
        border-color: rgba(80, 180, 255, 0.45);
      }

      .framectl {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 4px 8px;
        border: 1px solid rgba(255, 255, 255, 0.14);
        background: rgba(255, 255, 255, 0.03);
        border-radius: 10px;
        font-size: 12px;
        line-height: 1.2;
        color: rgba(232, 238, 246, 0.9);
      }

      .framectl-label {
        opacity: 0.75;
        font-size: 11px;
      }

      .framectl-range {
        opacity: 0.75;
        font-size: 11px;
        white-space: nowrap;
      }

      .num {
        width: 64px;
        padding: 3px 6px;
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.14);
        background: rgba(255, 255, 255, 0.06);
        color: #e8eef6;
        outline: none;
      }
    </style>
  </head>

  <body>
    <div class="wrap">
      <video id="previewout-video" autoplay playsinline muted hidden></video>
      <canvas id="previewout-canvas"></canvas>

      <div class="overlay">
        <div class="title" id="previewout-title">(preview)</div>
        <div class="mode" id="previewout-mode">Independent view</div>
        <div class="label" id="previewout-label">(no selection)</div>

        <div class="controls">
          <button class="btn" id="previewout-play" type="button" title="Play/Pause">Play</button>
          <label class="framectl" title="Frame index">
            <span class="framectl-label">frame</span>
            <input class="num" id="previewout-frame-index" type="number" step="1" value="0" />
            <span class="framectl-range"><span id="previewout-frame-min">0</span>â€“<span id="previewout-frame-max">0</span></span>
          </label>
          <button class="btn" id="previewout-follow" type="button">Follow</button>
          <button class="btn" id="previewout-frame" type="button">Frame</button>
          <button class="btn" id="previewout-axis" type="button" title="World axis: Off / Fixed / Full">Axis: Fixed</button>
          <button class="btn" id="previewout-pick" type="button">Pick: OFF</button>
        </div>
      </div>
    </div>

    <script type="module" src="./previewOutBoot.js"></script>
  </body>
</html>
