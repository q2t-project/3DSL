---
import Layout from "../layouts/Layout.astro";
import TopText from "../content/pages/top.md";

const demoModel = "/3dss/scenes/top/top.3dss.json";
---

<Layout
  title="3DSL"
  description="3DSL は、概念や関係を三次元の座標に配置し、拡大縮小しながら局面と総体を行き来できる表現基盤です。"
>
  <!-- Hero: information-dense, business-like UI (surface + clear hierarchy) -->
  <section class="grid gap-6 lg:grid-cols-12">
    <div class="ui-surface p-6 sm:p-8 lg:col-span-8 flex flex-col min-h-[86vh]">
      <div class="mt-4 max-w-[52ch] prose prose-invert prose-neutral prose-p:my-3 hero-copy home-poem font-content">
        <TopText />
      </div>

      <div class="mt-auto pt-7">
        <div class="home-peek ui-border ui-shadow" aria-hidden="true" data-swipe-ignore>
          <iframe
            class="home-peek__frame"
            src={`/viewer/peek.html?embed=1&model=${encodeURIComponent(demoModel)}&v=20260110b`}
            loading="lazy"
            title="3DSL demo preview"
            tabindex="-1"
            aria-hidden="true"
          ></iframe>
          <div class="home-peek__fade"></div>
        </div>
      </div>
    </div>

    <aside class="lg:col-span-4 grid gap-4">
      <div class="ui-surface p-6">
        <h2 class="text-base font-medium">このサイトでできること</h2>
        <ul class="mt-3 text-sm text-neutral-300 list-disc pl-5 space-y-2">
          <li>Viewer：拡大縮小・視点操作で、局面↔総体を行き来</li>
          <li>Library：作品を眺めて、刺さったものだけ詳細へ</li>
          <li>Docs / Concept：用語・運用・背景の整理</li>
        </ul>
      </div>
    </aside>
  </section>

  <!-- Entry cards: consistent UI components -->
  <section class="mt-10">
    <div class="flex items-end justify-between gap-3">
      <h2 class="text-lg font-medium">入口</h2>
    </div>

    <div class="mt-4 grid gap-4 md:grid-cols-2">
      <a href="/app/viewer" class="ui-card p-6">
        <div class="flex items-center justify-between">
          <h3 class="text-base font-medium">Viewer</h3>
          
        </div>
        <p class="mt-2 text-sm text-neutral-300">
          拡大縮小・視点操作で、局面と総体を往復。言語の積み上げ無しで「何か」を掴む入口。
        </p>
      </a>

      <a href="/library" class="ui-card p-6">
        <div class="flex items-center justify-between">
          <h3 class="text-base font-medium">Library</h3>
          
        </div>
        <p class="mt-2 text-sm text-neutral-300">
          サムネで眺めて、刺さったものだけ詳細へ。操作による探索は Viewer へのリンクで行います。
        </p>
      </a>

      <a href="/docs" class="ui-card p-6">
        <div class="flex items-center justify-between">
          <h3 class="text-base font-medium">Docs</h3>
          
        </div>
        <p class="mt-2 text-sm text-neutral-300">
          用語、設計、運用（引用・権利表記）のハブ。クローラにも意味密度を持たせる領域。
        </p>
      </a>

      <a href="/concept" class="ui-card p-6">
        <div class="flex items-center justify-between">
          <h3 class="text-base font-medium">Concept</h3>
          
        </div>
        <p class="mt-2 text-sm text-neutral-300">
          分節化と言語化の限界、図＝関係、マルチスケールの意味。抽象の受け皿。
        </p>
      </a>
    </div>
  </section>

  <style>
    /* Home-only typography (poetic tone) */
    .home-poem {
      letter-spacing: 0.01em;
      font-weight: 300;
      text-rendering: geometricPrecision;
    }
    .home-poem :is(h1, h2, h3, strong) {
      font-weight: 400;
    }
    .home-poem p {
      line-height: 1.95;
      margin: 0 0 0.85em;
    }
    .home-poem p:last-child {
      margin-bottom: 0;
    }

    /* Demo peek: show part of the viewer to invite scrolling */
    .home-peek {
      position: relative;
      height: min(52vh, 520px);
      overflow: hidden;
      border-radius: 18px;
      background: #0b0f14;
    }
    .home-peek__frame {
      position: absolute;
      inset: -12px;
      width: calc(100% + 24px);
      height: calc(100% + 24px);
      border: 0;
      pointer-events: auto; /* interactive (orbit) */
      transform: translateY(-18%);
      filter: saturate(0.9) contrast(1.05);
    }
    .home-peek__fade {
      position: absolute;
      inset: 0;
      pointer-events: none;
      background: linear-gradient(
        to bottom,
        rgba(0, 0, 0, 0.7) 0%,
        rgba(0, 0, 0, 0.15) 22%,
        rgba(0, 0, 0, 0) 45%,
        rgba(0, 0, 0, 0.25) 78%,
        rgba(0, 0, 0, 0.75) 100%
      );
    }
    .home-peek__hint {
      position: absolute;
      top: 10px;
      right: 10px;
      z-index: 2;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
      color: rgba(255, 255, 255, 0.85);
      border: 1px solid rgba(255, 255, 255, 0.15);
      background: rgba(0, 0, 0, 0.35);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
  </style>

</Layout>
