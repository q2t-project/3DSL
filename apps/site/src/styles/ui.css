/* apps/site/src/styles/ui.css */
/* Tailwindの @apply に依存しない “業務UI” 基本部品 */

:root{
  --ui-bg: #0b0f14;
  --ui-surface: rgba(255,255,255,0.04);
  --ui-surface-2: rgba(255,255,255,0.06);
  --ui-border: rgba(255,255,255,0.10);
  --ui-border-2: rgba(255,255,255,0.16);
  --ui-text: rgba(255,255,255,0.92);
  --ui-muted: rgba(255,255,255,0.62);
  --ui-dim: rgba(255,255,255,0.45);

  /* cyan accent */
  --ui-accent: rgba(56,189,248,1);          /* sky-400 */
  --ui-accent-soft: rgba(56,189,248,0.14);
  --ui-accent-border: rgba(56,189,248,0.28);

  --ui-radius-lg: 1rem;   /* ≒ rounded-2xl */
  --ui-radius-md: 0.75rem;
  --ui-shadow: 0 10px 30px rgba(0,0,0,0.35);
}

/* surfaces */
.ui-surface{
  background: var(--ui-surface);
  border: 1px solid var(--ui-border);
  border-radius: var(--ui-radius-lg);
  box-shadow: var(--ui-shadow);
}
.ui-surface--flat{
  box-shadow: none;
}

/* cards */
.ui-card{
  display: block;
  background: var(--ui-surface);
  border: 1px solid var(--ui-border);
  border-radius: var(--ui-radius-lg);
  transition: background .15s ease, border-color .15s ease, transform .15s ease;
  text-decoration: none;
  color: inherit;
}
.ui-card:hover{
  background: var(--ui-surface-2);
  border-color: var(--ui-border-2);
  transform: translateY(-1px);
}

/* chips */
.ui-chip{
  display: inline-flex;
  align-items: center;
  gap: .4rem;
  padding: .35rem .75rem;
  border-radius: 999px;
  border: 1px solid var(--ui-border);
  background: rgba(255,255,255,0.03);
  color: var(--ui-muted);
  font-size: 11.5px;
  line-height: 1;
  white-space: nowrap;
  cursor: pointer;
  user-select: none;
  transition: background .15s ease, border-color .15s ease, color .15s ease;
}
.ui-chip:hover{
  background: rgba(255,255,255,0.06);
  border-color: var(--ui-border-2);
}
.ui-chip[data-active="true"]{
  background: var(--ui-accent-soft);
  border-color: var(--ui-accent-border);
  color: rgba(224,247,255,0.95);
}

.ui-chip--active{
  background: var(--ui-accent-soft);
  border-color: var(--ui-accent-border);
  color: rgba(224,247,255,0.95);
}

/* buttons */
.ui-btn{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .5rem;
  padding: .6rem .9rem;
  border-radius: var(--ui-radius-md);
  border: 1px solid var(--ui-border);
  background: rgba(255,255,255,0.03);
  color: var(--ui-text);
  font-size: 14px;
  line-height: 1;
  text-decoration: none;
  cursor: pointer;
  transition: background .15s ease, border-color .15s ease;
}
.ui-btn:hover{
  background: rgba(255,255,255,0.06);
  border-color: var(--ui-border-2);
}
.ui-btn-primary{
  background: rgba(255,255,255,0.90);
  color: rgba(0,0,0,0.92);
  border-color: rgba(255,255,255,0.90);
}
.ui-btn-primary:hover{
  background: rgba(255,255,255,1);
}

/* header nav links */
.ui-navlink{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: .34rem .7rem;
  border-radius: 999px;
  border: 1px solid transparent;
  background: transparent;
  color: rgba(255,255,255,0.78);
  text-decoration: none;
  line-height: 1;
  font-size: .82rem;
  transition: background .15s ease, border-color .15s ease, color .15s ease;
}

@media (max-width: 480px){
  .ui-navlink{
    padding: .28rem .6rem;
    font-size: .78rem;
  }
}
.ui-navlink:hover{
  background: rgba(255,255,255,0.06);
  border-color: var(--ui-border);
  color: rgba(255,255,255,0.92);
}
.ui-navlink--active{
  background: var(--ui-accent-soft);
  border-color: var(--ui-accent-border);
  color: rgba(224,247,255,0.95);
}

/* Optional: mech-switch-ish segmented tabs.
   Usage: <nav class="ui-navbar ui-navbar--mecha"> ... */
.ui-navbar--mecha .ui-navlink{
  border-radius: 10px;
  background: rgba(255,255,255,0.035);
  border-color: rgba(255,255,255,0.14);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.10),
    inset 0 -1px 0 rgba(0,0,0,0.35);
}
.ui-navbar--mecha .ui-navlink:hover{
  background: rgba(255,255,255,0.06);
}
.ui-navbar--mecha .ui-navlink--active{
  background: rgba(255,255,255,0.085);
  border-color: rgba(56,189,248,0.38);
  color: rgba(240,252,255,0.98);
}

/* Header row (keep nav pinned near the top even when the logo grows) */
.ui-headerbar{
  display: flex;
  align-items: flex-start;
  gap: .75rem;
}

/* header brand + navbar: keep layout stable without relying on utility CSS */
.ui-brand-logo{
  display: block;
  height: 54px;
  width: auto;
  max-height: none;
  /* subtle technical glow */
  filter: brightness(1.9) drop-shadow(0 0 10px rgba(56,189,248,0.18));
}

/* Home only: make the title/logo larger without affecting other pages */
.is-home .ui-brand-logo{
  height: 84px; /* ~1.55x */
}

@media (min-width: 768px){
  .is-home .ui-brand-logo{
    height: 96px;
  }
}

.ui-navbar{
  margin-left: auto;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: flex-end;
  gap: .25rem;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none; /* Firefox */
  font-size: 11.5px;
}

.ui-navbar::-webkit-scrollbar{ display:none; }

@media (min-width: 640px){
  .ui-navbar{ font-size: 14px; }
}

/* inputs */
.ui-input{
  width: 100%;
  padding: .65rem .85rem;
  border-radius: var(--ui-radius-md);
  border: 1px solid var(--ui-border);
  background: rgba(0,0,0,0.25);
  color: var(--ui-text);
  font-size: 14px;
  outline: none;
}
.ui-input::placeholder{ color: var(--ui-dim); }
.ui-input:focus{
  border-color: var(--ui-accent-border);
  box-shadow: 0 0 0 3px rgba(56,189,248,0.12);
}

/* text helpers */
.ui-muted{ color: var(--ui-muted); }

/* ==============================
   Library cards (no-thumb UI)
   - dense grid, but each card must read as a separate surface
   - 2-row: top meta (fixed slots) + bottom title (full width)
   ============================== */

/* grid: mobile = full width, desktop = finite-width cards tiled in both axes */
.lib-grid{
  display: grid;
  grid-template-columns: 1fr;
  gap: 7px;
  padding-inline: 10px;
}

@media (min-width: 640px){
  .lib-grid{
    gap: 8px;
    padding-inline: 0;
    /* finite card width: do NOT stretch to full row on wide screens */
    grid-template-columns: repeat(auto-fill, minmax(300px, 420px));
    justify-content: start;
  }
}

.lib-card{
  position: relative;
  display: block;
  text-decoration: none;
  color: inherit;

  cursor: pointer;

  /* separate surface from background (subtle, but clearly distinct) */
  background:
    radial-gradient(260px 140px at 18% 0%, rgba(255,255,255,0.050), transparent 62%),
    linear-gradient(180deg, rgba(255,255,255,0.082), rgba(255,255,255,0.030));
  border: 1px solid rgba(255,255,255,0.14);
  border-radius: 10px;
  box-shadow:
    0 8px 22px rgba(0,0,0,0.40),
    inset 0 1px 0 rgba(255,255,255,0.10);

  transition: background .15s ease, border-color .15s ease;
}

/* Card internal links (B route)
   - main area navigates to the meta/detail page
   - top-right button navigates to the fullscreen viewer
   - do NOT nest interactive elements to avoid browser DOM normalization issues
*/

.lib-main{
  display: block;
  color: inherit;
  text-decoration: none;
  /* reserve space for the top-right viewer button */
  padding-right: 52px; /* 32px + margins */
}

.lib-open{
  position: absolute;
  top: 10px;
  right: 10px;
  z-index: 3;
  display: grid;
  place-items: center;
  width: 32px;
  height: 32px;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.20);
  background: rgba(0,0,0,0.55);
  backdrop-filter: blur(6px);
  color: rgba(255,255,255,0.90);
  text-decoration: none;
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.06);
}

.lib-open:hover{
  border-color: rgba(255,255,255,0.35);
  background: rgba(0,0,0,0.75);
}

.lib-open:focus-visible{
  outline: none;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.06),
    0 0 0 3px rgba(56,189,248,0.18);
}

.lib-open .icon{
  font-size: 16px;
  line-height: 1;
}

.lib-card:hover{
  background:
    radial-gradient(260px 140px at 18% 0%, rgba(255,255,255,0.065), transparent 62%),
    linear-gradient(180deg, rgba(255,255,255,0.098), rgba(255,255,255,0.036));
  border-color: rgba(255,255,255,0.20);
}

.lib-card:focus-within,
.lib-card:focus-visible{
  outline: none;
  box-shadow:
    0 8px 22px rgba(0,0,0,0.40),
    inset 0 1px 0 rgba(255,255,255,0.10),
    0 0 0 3px rgba(56,189,248,0.18);
}

/* top meta row: wrap-friendly (no overlap with ticker) */
.lib-meta{
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
  padding: 2px 6px 1px;
}
@media (min-width: 640px){
  .lib-meta{ padding: 3px 8px 2px; }
}

/* UUID badge: existence > readability */
.lib-uuid-badge{
  display: inline-flex;
  align-items: center;
  max-width: 100%;
  padding: 0 5px;
  height: 16px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.04);
  color: rgba(255,255,255,0.52);
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 10px;
  line-height: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.lib-created,
.lib-updated{
  font-size: 10.5px;
  line-height: 1;
  font-variant-numeric: tabular-nums;
  white-space: nowrap;
}
.lib-created{ color: rgba(255,255,255,0.70); }
.lib-updated{ color: rgba(224,247,255,0.84); font-style: italic; }

/* ticker */
.lib-ticker{
  min-width: 0;
  overflow: hidden;
  white-space: nowrap;
  color: rgba(255,255,255,0.62);
  font-size: 11.5px;
  line-height: 1.1;
  font-family: "Inter", system-ui, -apple-system, "Segoe UI", sans-serif;

  /* fade edges (less noisy) */
  -webkit-mask-image: linear-gradient(90deg, transparent, #000 10px, #000 calc(100% - 10px), transparent);
  mask-image: linear-gradient(90deg, transparent, #000 10px, #000 calc(100% - 10px), transparent);
}

.lib-ticker-track{
  display: inline-flex;
  align-items: center;
  will-change: transform;
  transform: translate3d(0,0,0);
}

.lib-ticker-seg{
  flex: 0 0 auto;
}

.lib-ticker-gap{
  display: inline-block;
  width: var(--lib-ticker-gap, 64px);
}

/* animate only when JS marks it */
.lib-ticker[data-scroll="true"] .lib-ticker-track{
  animation: libTicker var(--lib-ticker-dur, 14s) linear infinite;
  animation-delay: var(--lib-ticker-delay, 0s);
}

/* reduce motion: never scroll */
@media (prefers-reduced-motion: reduce){
  .lib-ticker[data-scroll="true"] .lib-ticker-track{ animation: none; }
}

/* pause on hover/focus (pointer devices) */
@media (pointer: fine){
  .lib-card:hover .lib-ticker[data-scroll="true"] .lib-ticker-track,
  .lib-card:focus-within .lib-ticker[data-scroll="true"] .lib-ticker-track{
    animation-play-state: paused;
  }
}

@keyframes libTicker{
  from{ transform: translate3d(0,0,0); }
  to{ transform: translate3d(calc(-1 * var(--lib-ticker-dist, 240px)),0,0); }
}

/* bottom title row */
.lib-title{
  padding: 7px 10px 10px;
  border-top: 1px solid rgba(255,255,255,0.075);

  font-family: "Noto Sans JP", "Inter", system-ui, -apple-system, "Segoe UI", sans-serif;
  font-weight: 650;
  letter-spacing: 0.005em;
  font-size: 16px;
  line-height: 1.22;

  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* tags (public meaning tags only; prefixes removed in JS) */
.lib-tags{
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  padding: 6px 10px 8px;
  padding-right: 52px; /* keep clear of the ⛶ button */
}

.lib-tag{
  display: inline-flex;
  align-items: center;
  height: 18px;
  padding: 0 7px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.04);
  color: rgba(255,255,255,0.72);
  font-size: 11px;
  line-height: 1;
  white-space: nowrap;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
}

.lib-tag-more{
  color: rgba(255,255,255,0.55);
  border-color: rgba(255,255,255,0.10);
  background: rgba(0,0,0,0.18);
}

@media (min-width: 640px){
  .lib-title{
    padding: 8px 12px 12px;
    font-weight: 600;
    font-size: 15px;
  }
}



/* ---- Library fixes ---- */

/* prevent ⛶ overlap */
.lib-meta, .lib-ticker, .lib-title { padding-right: 52px; }

/* unified date chip */
.lib-date{
  font-size: 10.5px;
  line-height: 1;
  font-variant-numeric: tabular-nums;
  white-space: nowrap;
  color: rgba(255,255,255,0.75);
}

/* ticker: clean animation */
.lib-ticker{
  overflow: hidden;
  white-space: nowrap;
}
.lib-ticker-track{
  display: inline-flex;
  width: max-content;
  flex: 0 0 auto;
  gap: 24px;
  will-change: transform;
}
.lib-ticker[data-scroll="true"] .lib-ticker-track{
  animation: libTickerClean var(--lib-ticker-dur, 14s) linear infinite;
}
@keyframes libTickerClean{
  from{ transform: translateX(0); }
  to{ transform: translateX(calc(-1 * var(--lib-ticker-dist, 0px))); }
}
