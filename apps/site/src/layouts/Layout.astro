---
import "../styles/global.css";
import "../styles/ui.css";

const nav = [
  { href: "/", label: "Home" },
  { href: "/library", label: "Library" },
  { href: "/docs", label: "Docs" },
];
---

<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>3DSL</title>
  </head>

  <body class="min-h-screen bg-neutral-950 text-neutral-50">
    <header class="sticky top-0 z-50 border-b border-neutral-800 bg-neutral-950/90 backdrop-blur">
      <div class="mx-auto max-w-6xl px-4 py-3">
        <div class="flex items-center gap-3">
          <!-- Mobile menu (nav links live here) -->
          <details class="relative md:hidden">
            <summary class="ui-button ui-button-ghost px-3 py-2 cursor-pointer select-none">
              Menu
            </summary>
            <div class="absolute left-0 mt-2 w-48 ui-surface ui-shadow ui-border p-2">
              <nav class="flex flex-col gap-1">
                {nav.map((item) => (
                  <a href={item.href} class="ui-button ui-button-ghost justify-start">
                    {item.label}
                  </a>
                ))}
                <div class="h-px bg-neutral-800 my-1" />
                <a href="/policy" class="ui-button ui-button-ghost justify-start">
                  Policy
                </a>
              </nav>
            </div>
          </details>

          <!-- Brand (single instance to avoid duplicate render) -->
          <a href="/" class="flex items-center gap-2">
            <img
              src="/assets/logo/3DSL.svg"
              alt="3DSL"
              class="h-6 w-auto"
              width="96"
              height="24"
              loading="eager"
            />
          </a>

          <!-- Desktop nav -->
          <nav class="hidden md:flex items-center gap-1 ml-2">
            {nav.map((item) => (
              <a
                href={item.href}
                class="ui-button ui-button-ghost"
                aria-label={item.label}
              >
                {item.label}
              </a>
            ))}
          </nav>

          <!-- Policy (always visible) -->
          <a href="/policy" class="ml-auto ui-button ui-button-ghost">
            Policy
          </a>
        </div>
      </div>
    </header>

    <main class="mx-auto max-w-6xl px-4 py-8">
      <slot />
    </main>

    <footer class="border-t border-neutral-800 py-8 mt-12">
      <div class="mx-auto max-w-6xl px-4 text-sm text-neutral-400">
        <div class="flex flex-col sm:flex-row gap-2 sm:items-center sm:justify-between">
          <div>Â© {new Date().getFullYear()} 3DSL</div>
          <div class="flex gap-3">
            <a href="/policy" class="hover:text-neutral-200">Policy</a>
            <a href="/docs" class="hover:text-neutral-200">Docs</a>
          </div>
        </div>
      </div>
    </footer>
  </body>
</html>
